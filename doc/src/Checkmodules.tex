This macro runs several tests on all source modules.
It returns 0 if the result is correct, 1 if some module
failed, and 2 if some other error occured.
