* fix the gcc warnings
* remove the extern declarations
* include M_PI
* safe snprintf
* generic random (note: in glibc, ANSI rand() == POSIX random())
